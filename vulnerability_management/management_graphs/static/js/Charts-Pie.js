

function Pie_chart(data, container, title){
  Highcharts.chart(container, {
      chart: {
          plotBackgroundColor: null,
          plotBorderWidth: null,
          plotShadow: false,
          type: 'pie'
      },
      title: {
          text: title
      },
      tooltip: {
          pointFormat: '{series.name}: <b>{point.percentage:.1f}</b>'
      },
      accessibility: {
          point: {
              valueSuffix: '%'
          }
      },
      plotOptions: {
          pie: {
              allowPointSelect: true,
              cursor: 'pointer',
              dataLabels: {
                  enabled: true,
                  format: '<b>{point.name}</b>: {point.percentage:.1f} '
              }
          }
      },
      series: [{
          name: 'Values',
          colorByPoint: true,
          data: data
      }]
  });

}



function fetchData(){
  console.log("is fatching one time" );
  var url = $("#Json_data_types").attr("data-url");

  fetch(url)
      .then(response => response.json())
      .then(data => {
        console.log(data);
        Pie_chart(data, 'container-pie','Vulnerability types 2020') })
      .catch(e => console.console.error(e))

}

function fetchData_tikets(){
  console.log("is fatching one time" );
  var url = $("#Json_data_Tickets").attr("data-url");

  fetch(url)
      .then(response => response.json())
      .then(data => {
        console.log(data);
        Pie_chart(data, 'container-pie-Tickets','Tickets Status 2020') })
      .catch(e => console.console.error(e))

}

fetchData()
fetchData_tikets()
